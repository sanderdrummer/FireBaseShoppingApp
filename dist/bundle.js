!function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,exports,e){"use strict";e(10);var n=e(14),i=e(17),s=e(19),o=e(22),r=new o,d=new n,a=new i,u=new s;u.setProductController(d),window.location.hash||(window.location.hash="#/"),r.register("/",function(t){a.init()}).register("/lists/:list",function(t){console.log(t),u.show(t)}).register("/lists/:list/destroy",function(t){u.destroy(t)}).register("/lists/:list/reset",function(t){u.reset(t)}).register("/lists/:list/addProducts",function(t){d.init(t)}).register("/lists/:list/addProductToBasket/:product",function(t){u.addProductToBasket(t)}).register("/lists/:list/revertProductFromBasket/:product",function(t){u.revertProductFromBasket(t)}).register("/lists/:list/addProducts/:product",function(t){d.selectProductAmount(t)}).register("/lists/:list/addProductToList/:product/:amount",function(t){u.addProductToList(t)})},,,,,,,,,,function(t,exports){},,,,function(t,exports,e){"use strict";var n=e(15),i=e(16),s=function(){function t(){this.productView=new n,this.filteredProducts={},this.products={},this.fireBase=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/products")}return t.prototype.init=function(t){this.getProducts(),this.list=t.list},t.prototype.updateHandlers=function(){var t=this;this.addButton=document.getElementById("addButton"),this.searchInput=document.getElementById("searchInput"),this.addButton.addEventListener("click",function(){return t.addProduct()}),this.searchInput.addEventListener("keyup",function(e){return t.addOnEnter(e)}),this.searchInput.addEventListener("keyup",function(e){return t.filterProducts(e)})},t.prototype.getProducts=function(){var t=this;this.fireBase.on("value",function(e){e.val()&&t.updateProducts(e.val()),t.updateView(),document.getElementById("searchInput").focus()},function(t){console.log("The read failed: "+t.code)})},t.prototype.getProduct=function(t){return this.products[t]?this.products[t]:void 0},t.prototype.updateProducts=function(t){var e,n=this;Object.keys(t).map(function(s){e=t[s],n.products[s]=new i(e)})},t.prototype.updateView=function(){this.productView.render(this.products,this.list),this.updateHandlers()},t.prototype.filterProducts=function(t){var e,n=this,i=this.searchInput.value;this.filteredProducts={},Object.keys(this.products).map(function(t){e=n.products[t],e.name.indexOf(i)>-1&&(n.filteredProducts[t]=e)}),this.productView.updateList(this.filteredProducts,this.list)},t.prototype.addOnEnter=function(t){return 13==t.keyCode?(this.addProduct(),!1):void 0},t.prototype.addProduct=function(){var t,e=this.searchInput.value,n=0===Object.keys(this.filteredProducts).length;e&&n?(t=new i({name:e}),t.update()):t=this.filteredProducts[Object.keys(this.filteredProducts)[0]],console.log("ADDD PRODUCT",this.filteredProducts,t,Object.keys(this.filteredProducts)[0]),this.searchInput.value="",window.location.hash+="/"+t.name},t.prototype.selectProductAmount=function(t){this.productView.showAmount(t)},t}();t.exports=s},function(t,exports){"use strict";var e=function(){function t(){this.view=document.getElementById("products")}return t.prototype.render=function(t,e){this.view.innerHTML='\n        <div id="selectAmount" class="hidden">\n        	<div class="container">\n				<input id="amountInput" class="grow"type="text" placeholder="Anzahl" />\n			</div>\n        	<div class="container">\n        		<a class="button grow" href="#/" id="addProductButton">Produkt zur Liste</a>\n			</div>\n        </div>\n    	<div class="container">\n			<input class="grow" id="searchInput" value="" placeholder="search" type="text">\n        </div>\n    	<div class="container">\n        	<a class="grow button" id="addButton">+ Produkt</a>\n        </div>\n\n        <div id="productsList"></div>\n        \n        <div class="container">\n			<a class="button grow" href="#/lists/'+e+'"> Fertig </a>\n		</div>\n		',this.updateList(t,e)},t.prototype.updateList=function(t,e){var n,i=document.getElementById("productsList"),s=Object.keys(t).map(function(i){return n=t[i],'<li class="product">\n				<a href="#/lists/'+e+"/addProducts/"+n.name+'">\n					'+n.name+"\n				</a>\n			</li>"}).join("");i.innerHTML=s},t.prototype.showAmount=function(t){var e=this,n=document.getElementById("addProductButton"),i=document.getElementById("selectAmount"),s=document.getElementById("amountInput");i.classList.remove("hidden"),i.addEventListener("keyup",function(i){return e.updateLinkText(n,t,i)}),s.focus()},t.prototype.updateLinkText=function(t,e,n){var i;n.target.value=n.target.value,n.target.value&&(i="#/lists/"+e.list+"/addProductToList/"+e.product+"/"+n.target.value,t.href=i,13===n.keyCode&&(window.location.hash=i))},t}();t.exports=e},function(t,exports){"use strict";var e=function(){function t(t){this.name=t.name||"",this.amount=t.amount||1,this.rating=t.rating||0,this.fireBase=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/products/"+t.name)}return t.prototype.update=function(){this.fireBase.set(this.getData())},t.prototype.getData=function(){return{name:this.name,amount:this.amount||1,rating:this.rating||0}},t.prototype.remove=function(){this.fireBase.remove()},t}();t.exports=e},function(t,exports,e){"use strict";var n=e(18),i=e(19),s=e(20),o=function(){function t(){this.lists={},this.listsView=new n,this.listController=new i,this.fireBase=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/lists")}return t.prototype.init=function(){this.getLists()},t.prototype.getLists=function(){var t=this;this.fireBase&&this.fireBase.on("value",function(e){e&&t.updateLists(e.val())},function(t){console.log("The read failed: "+t.code)})},t.prototype.updateLists=function(t){var e,n=this;t&&Object.keys(t).map(function(i){e=t[i],n.lists[i]=new s(e)}),this.listsView.update(this.lists),this.updateHandlers()},t.prototype.updateHandlers=function(){var t=this,e=document.getElementById("listInput"),n=document.getElementById("addListButton");n.addEventListener("click",function(){return t.addList(e)}),e.addEventListener("keyup",function(n){return t.addOnEnter(n,e)})},t.prototype.addOnEnter=function(t,e){return 13==t.keyCode?(this.addList(e),!1):void 0},t.prototype.addList=function(t){var e=t.value;e&&(this.listController.addAndShowNewList(e),t.value="")},t}();t.exports=o},function(t,exports){"use strict";var e=function(){function t(){this.view=document.getElementById("view"),this.products=document.getElementById("products")}return t.prototype.update=function(t){var e,n;this.products.innerHTML="",n=Object.keys(t).map(function(n){return e=t[n],'<li class="list">\n				<a class="list-item" href="#/lists/'+e.name+'">'+e.name+"</a>\n			</li>"}).join("");var i='\n		<div class="container">\n			<input id="listInput" class="grow m-r-1" required value="" placeholder="neueListe" type="text">\n        	<button id="addListButton">neue Liste hinzufügen</button>\n		</div>\n        <div id="lists">'+n+"<div>\n		";this.view.innerHTML=i},t}();t.exports=e},function(t,exports,e){"use strict";var n=e(20),i=e(21),s=function(){function t(){this.listView=new i}return t.prototype.setProductController=function(t){this.productController=t},t.prototype.addAndShowNewList=function(t){var e=new n({name:t});e.update()},t.prototype.show=function(t){var e=this;this.fireBase=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/lists/"+t.list),this.fireBase.on("value",function(t){t.val()&&(e.updateList(t.val()),e.listView.render(e.list))},function(t){console.log("The read failed: "+t.code)})},t.prototype.updateList=function(t){this.list=new n(t)},t.prototype.addProductToList=function(t){var e=this.productController.getProduct(t.product);e.amount=t.amount,e.rating+=1,this.list.toAdd[e.name]=e.getData(),this.list.update(),this.listView.render(this.list),this.productController.updateView(),window.location.hash="#/lists/"+t.list+"/addProductToList"},t.prototype.addProductToBasket=function(t){this.list.alreadyAdded[t.product]=this.list.toAdd[t.product],this.list.toAdd[t.product]={},this.list.update(),this.listView.render(this.list)},t.prototype.revertProductFromBasket=function(t){this.list.toAdd[t.product]=this.list.alreadyAdded[t.product],this.list.alreadyAdded[t.product]={},this.list.update(),this.listView.render(this.list)},t.prototype.reset=function(t){this.list.toAdd={},this.list.alreadyAdded={},this.list.update(),this.listView.render(this.list)},t.prototype.destroy=function(t){this.list.fireBase.remove(),window.location.hash="#/",delete this.list,delete this},t}();t.exports=s},function(t,exports){"use strict";var e=function(){function t(t){this.toAdd=t.toAdd||{},this.alreadyAdded=t.alreadyAdded||{},this.name=t.name.trim(),this.onLoad=t.onLoad||function(){},this.fireBase=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/lists/"+t.name.trim())}return t.prototype.update=function(){this.fireBase.set({toAdd:this.toAdd,alreadyAdded:this.alreadyAdded,name:this.name})},t}();t.exports=e},function(t,exports){"use strict";var e=function(){function t(){this.view=document.getElementById("view"),this.products=document.getElementById("products")}return t.prototype.render=function(t){this.products.innerHTML="",this.template="\n		<h1>"+t.name+'</h1>\n		<div class="container">\n			<a class="button grow" href="#/lists/'+t.name+'/addProducts">+ Produkt</a>\n		</div>\n		<h2>noch in den Korb</h2>\n		<div id="toAdd"></div>\n		<h2>schon dabei</h2>\n		<div id="alreadyAdded"></div>\n		<div class="container">\n			<a class="button grow" href="#/lists/'+t.name+'/reset">Leeren</a>\n		</div>\n		<div class="container">\n			<a class="button grow" href="#/lists/'+t.name+'/destroy">löschen</a>\n		</div>\n		<a \n		<a class="list-item" \n		',this.view.innerHTML=this.template,this.updateList(t,"toAdd"),this.updateList(t,"alreadyAdded")},t.prototype.updateList=function(t,e){var n,i,s=document.getElementById(e);n=Object.keys(t[e]).map(function(n){var s=t[e][n];return console.log(s),i="toAdd"===e?"#/lists/"+t.name+"/addProductToBasket/"+n:"#/lists/"+t.name+"/revertProductFromBasket/"+n,'\n				<li class="product"><a href="'+i+'">'+n+'</a><input type="text" value="'+s.amount+'"></li>\n			'}).join(""),s.innerHTML=n},t}();t.exports=e},function(t,exports,e){"use strict";var n=e(23),i=e(24),s=function(){function t(){var t=this;this.routes=[],this.findParam=new RegExp(":[a-zA-Z]*"),window.addEventListener("hashchange",function(){t.handleHashChange()}),document.addEventListener("DOMContentLoaded",function(){t.handleHashChange()})}return t.prototype.parseRouteUrl=function(t,e){var n=this.getMatchAndParamsOf(t,e.url);n.doesMatch&&e.callback(new i(n.params))},t.prototype.getMatchAndParamsOf=function(t,e){var n,i=this,s=e.split("/"),o=t.split("/"),r=!1,d={},a=[];return s.length===o.length&&(o.map(function(t,e){t===s[e]?a.push(!0):i.findParam.test(s[e])?(n=s[e].replace(":",""),d[n]=t):a.push(!1)}),r=a.reduce(function(t,e){return t&&e})),{params:d,doesMatch:r}},t.prototype.handleHashChange=function(){var t=this,e=window.location.hash.replace("#","");this.routes.forEach(function(n){t.parseRouteUrl(e,n)})},t.prototype.register=function(t,e){return this.routes.push(new n(t,e)),this},t}();t.exports=s},function(t,exports){"use strict";var e=function(){function t(t,e){this.url=t,this.callback=e}return t}();t.exports=e},function(t,exports){"use strict";var e=function(){function t(t){this.id=t.id||0,this.amount=t.amount||0,this.list=t.list||"",this.product=t.product||""}return t}();t.exports=e}]);
//# sourceMappingURL=bundle.js.map