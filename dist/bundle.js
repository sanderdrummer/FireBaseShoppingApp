!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,exports,e){"use strict";e(10);var i=e(14),n=e(17),s=e(19),o=e(22),r=new o,d=new i,u=new n,a=new s;a.setProductController(d),window.location.hash||(window.location.hash="#/"),r.register("/",function(t){u.init()}).register("/lists/:list",function(t){console.log(t),a.show(t)}).register("/lists/:list/destroy",function(t){a.destroy(t)}).register("/lists/:list/reset",function(t){a.reset(t)}).register("/lists/:list/addProducts",function(t){d.init(t)}).register("/lists/:list/addProductToBasket/:product",function(t){a.addProductToBasket(t)}).register("/lists/:list/revertProductFromBasket/:product",function(t){a.revertProductFromBasket(t)}).register("/lists/:list/addProducts/:product",function(t){d.selectProductAmount(t)}).register("/lists/:list/addProductToList/:product/:amount",function(t){a.addProductToList(t)})},,,,,,,,,,function(t,exports){},,,,function(t,exports,e){"use strict";var i=e(15),n=e(16),s=function(){function t(){this.productView=new i,this.filteredProducts={},this.products={},this.fireBase=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/products")}return t.prototype.init=function(t){this.getProducts(),this.list=t.list},t.prototype.updateHandlers=function(){var t=this;this.addButton=document.getElementById("addButton"),this.searchInput=document.getElementById("searchInput"),this.addButton.addEventListener("click",function(){return t.addProduct()}),this.searchInput.addEventListener("keyup",function(e){return t.addOnEnter(e)}),this.searchInput.addEventListener("keyup",function(){return t.filterProducts()})},t.prototype.getProducts=function(){var t=this;this.fireBase.on("value",function(e){e.val()&&t.updateProducts(e.val()),t.updateView()},function(t){console.log("The read failed: "+t.code)})},t.prototype.getProduct=function(t){return this.products[t]?this.products[t]:void 0},t.prototype.updateProducts=function(t){var e,i=this;Object.keys(t).map(function(s){e=t[s],i.products[s]=new n(e)})},t.prototype.updateView=function(){this.productView.render(this.products,this.list),this.updateHandlers()},t.prototype.filterProducts=function(){var t,e=this,i=this.searchInput.value;this.filteredProducts={},Object.keys(this.products).map(function(n){console.log(e.products,n),t=e.products[n],t.name.indexOf(i)>-1&&(e.filteredProducts[n]=t)}),this.productView.updateList(this.filteredProducts,this.list)},t.prototype.addOnEnter=function(t){return 13==t.keyCode?(this.addProduct(),!1):void 0},t.prototype.addProduct=function(){var t,e=this.searchInput.value,i=0===Object.keys(this.filteredProducts).length;e&&i&&(t=new n({name:e}),t.update()),this.searchInput.value=""},t.prototype.selectProductAmount=function(t){this.productView.showAmount(t)},t}();t.exports=s},function(t,exports){"use strict";var e=function(){function t(){this.view=document.getElementById("products")}return t.prototype.render=function(t,e){this.updateList(t,e),this.view.innerHTML='\n        <div id="selectAmount" class="hidden">\n        	<div class="container">\n				<input class="grow"type="text" placeholder="Anzahl" />\n			</div>\n        	<div class="container">\n        		<a class="button grow" href="#/" id="addProductButton">Produkt zur Liste</a>\n			</div>\n        </div>\n		<input id="searchInput" value="" placeholder="search" type="text">\n        <button id="addButton">+ Produkt</button>\n        <div id="productsList"></div>\n        <div class="container">\n			<a class="button grow" href="#/lists/'+e+'"> Fertig </a>\n		</div>\n		'},t.prototype.updateList=function(t,e){var i,n=document.getElementById("productsList"),s=Object.keys(t).map(function(n){return i=t[n],'<li class="product">\n				<a href="#/lists/'+e+"/addProducts/"+i.name+'">\n					'+i.name+"\n				</a>\n			</li>"}).join("");n.innerHTML=s},t.prototype.showAmount=function(t){var e=this,i=document.getElementById("selectAmount"),n=document.getElementById("addProductButton");i.classList.remove("hidden"),i.addEventListener("keyup",function(i){return e.updateLinkText(n,t,i)})},t.prototype.updateLinkText=function(t,e,i){i.target.value=i.target.value||1,t.href="#/lists/"+e.list+"/addProductToList/"+e.product+"/"+i.target.value},t}();t.exports=e},function(t,exports){"use strict";var e=function(){function t(t){this.name=t.name||"",this.amount=t.amount||1,this.rating=t.rating||0,this.fireBase=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/products/"+t.name)}return t.prototype.update=function(){this.fireBase.set(this.getData)},t.prototype.getData=function(){return{name:this.name,amount:this.amount,rating:this.rating}},t.prototype.remove=function(){this.fireBase.remove()},t}();t.exports=e},function(t,exports,e){"use strict";var i=e(18),n=e(19),s=e(20),o=function(){function t(){this.lists={},this.listsView=new i,this.listController=new n,this.fireBase=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/lists")}return t.prototype.init=function(){this.getLists()},t.prototype.getLists=function(){var t=this;this.fireBase&&this.fireBase.on("value",function(e){e&&t.updateLists(e.val())},function(t){console.log("The read failed: "+t.code)})},t.prototype.updateLists=function(t){var e,i=this;t&&Object.keys(t).map(function(n){e=t[n],i.lists[n]=new s(e)}),this.listsView.update(this.lists),this.updateHandlers()},t.prototype.updateHandlers=function(){var t=this,e=document.getElementById("listInput"),i=document.getElementById("addListButton");i.addEventListener("click",function(){return t.addList(e)}),e.addEventListener("keyup",function(i){return t.addOnEnter(i,e)})},t.prototype.addOnEnter=function(t,e){return 13==t.keyCode?(this.addList(e),!1):void 0},t.prototype.addList=function(t){var e=t.value;e&&(this.listController.addAndShowNewList(e),t.value="")},t}();t.exports=o},function(t,exports){"use strict";var e=function(){function t(){this.view=document.getElementById("view"),this.products=document.getElementById("products")}return t.prototype.update=function(t){var e,i;this.products.innerHTML="",i=Object.keys(t).map(function(i){return e=t[i],'<li class="list">\n				<a class="list-item" href="#/lists/'+e.name+'">'+e.name+"</a>\n			</li>"}).join("");var n='\n		<div class="container">\n			<input id="listInput" class="grow m-r-1" required value="" placeholder="neueListe" type="text">\n        	<button id="addListButton">neue Liste hinzufügen</button>\n		</div>\n        <div id="lists">'+i+"<div>\n		";this.view.innerHTML=n},t}();t.exports=e},function(t,exports,e){"use strict";var i=e(20),n=e(21),s=function(){function t(){this.listView=new n}return t.prototype.setProductController=function(t){this.productController=t},t.prototype.addAndShowNewList=function(t){var e=new i({name:t});e.update()},t.prototype.show=function(t){var e=this;this.fireBase=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/lists/"+t.list),this.fireBase.on("value",function(t){t.val()&&(e.updateList(t.val()),e.listView.render(e.list))},function(t){console.log("The read failed: "+t.code)})},t.prototype.updateList=function(t){this.list=new i(t)},t.prototype.addProductToList=function(t){var e=this.productController.getProduct(t.product);e.amount=t.amount,e.rating+=1,this.list.toAdd[e.name]=e.getData(),this.list.update(),this.listView.render(this.list),this.productController.updateView(),console.log(window.location.hash),window.location.hash="#/lists/"+t.list+"/addProductToList"},t.prototype.addProductToBasket=function(t){this.list.alreadyAdded[t.product]=this.list.toAdd[t.product],this.list.toAdd[t.product]={},this.list.update(),this.listView.render(this.list)},t.prototype.revertProductFromBasket=function(t){this.list.toAdd[t.product]=this.list.alreadyAdded[t.product],this.list.alreadyAdded[t.product]={},this.list.update(),this.listView.render(this.list)},t.prototype.reset=function(t){this.list.toAdd={},this.list.alreadyAdded={},this.list.update(),this.listView.render(this.list)},t.prototype.destroy=function(t){this.list.fireBase.remove(),window.location.hash="#/",delete this.list,delete this},t}();t.exports=s},function(t,exports){"use strict";var e=function(){function t(t){this.toAdd=t.toAdd||{},this.alreadyAdded=t.alreadyAdded||{},this.name=t.name.trim(),this.onLoad=t.onLoad||function(){},this.fireBase=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/lists/"+t.name.trim())}return t.prototype.update=function(){this.fireBase.set({toAdd:this.toAdd,alreadyAdded:this.alreadyAdded,name:this.name})},t}();t.exports=e},function(t,exports){"use strict";var e=function(){function t(){this.view=document.getElementById("view"),this.products=document.getElementById("products")}return t.prototype.render=function(t){this.products.innerHTML="",this.template="\n		<h1>"+t.name+'</h1>\n		<div class="container">\n			<a class="button grow" href="#/lists/'+t.name+'/addProducts">+ Produkt</a>\n		</div>\n		<h2>noch in den Korb</h2>\n		<div id="toAdd"></div>\n		<h2>schon dabei</h2>\n		<div id="alreadyAdded"></div>\n		<div class="container">\n			<a class="button grow" href="#/lists/'+t.name+'/reset">Leeren</a>\n		</div>\n		<div class="container">\n			<a class="button grow" href="#/lists/'+t.name+'/destroy">löschen</a>\n		</div>\n		<a \n		<a class="list-item" \n		',this.view.innerHTML=this.template,this.updateList(t,"toAdd"),this.updateList(t,"alreadyAdded")},t.prototype.updateList=function(t,e){var i,n,s=document.getElementById(e);i=Object.keys(t[e]).map(function(i){var s=t[e][i];return console.log(s),n="toAdd"===e?"#/lists/"+t.name+"/addProductToBasket/"+i:"#/lists/"+t.name+"/revertProductFromBasket/"+i,'\n				<li class="product"><a href="'+n+'">'+i+'</a><input type="text" value="'+s.amount+'"></li>\n			'}).join(""),s.innerHTML=i},t}();t.exports=e},function(t,exports,e){"use strict";var i=e(23),n=e(24),s=function(){function t(){var t=this;this.routes=[],this.findParam=new RegExp(":[a-zA-Z]*"),window.addEventListener("hashchange",function(){t.handleHashChange()}),document.addEventListener("DOMContentLoaded",function(){t.handleHashChange()})}return t.prototype.parseRouteUrl=function(t,e){var i=this.getMatchAndParamsOf(t,e.url);i.doesMatch&&e.callback(new n(i.params))},t.prototype.getMatchAndParamsOf=function(t,e){var i,n=this,s=e.split("/"),o=t.split("/"),r=!1,d={},u=[];return s.length===o.length&&(o.map(function(t,e){t===s[e]?u.push(!0):n.findParam.test(s[e])?(i=s[e].replace(":",""),d[i]=t):u.push(!1)}),r=u.reduce(function(t,e){return t&&e})),{params:d,doesMatch:r}},t.prototype.handleHashChange=function(){var t=this,e=window.location.hash.replace("#","");this.routes.forEach(function(i){t.parseRouteUrl(e,i)})},t.prototype.register=function(t,e){return this.routes.push(new i(t,e)),this},t}();t.exports=s},function(t,exports){"use strict";var e=function(){function t(t,e){this.url=t,this.callback=e}return t}();t.exports=e},function(t,exports){"use strict";var e=function(){function t(t){this.id=t.id||0,this.amount=t.amount||0,this.list=t.list||"",this.product=t.product||""}return t}();t.exports=e}]);
//# sourceMappingURL=bundle.js.map