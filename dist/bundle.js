angular.module("Fireshopping",["CompiledTemplates","firebase"]).config(["$compileProvider","$httpProvider",function(t,e){t.debugInfoEnabled(!1),e.useApplyAsync(!0)}]),angular.module("Fireshopping").factory("domService",["$timeout","$window",function(t,e){"use strict";var i={};return i.focus=function(i){t(function(){var t=e.document.getElementById(i);t&&t.focus()})},i}]),angular.module("Fireshopping").factory("listService",["$firebaseObject","$firebaseArray",function(t,e){"use strict";function i(){r.forEach(function(t){t(o.list)})}var s,o={},r=[];return o.list={},o.setList=function(e){if(s=e.index,e.list){var r=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/list/"+e.list);o.list=t(r),i()}},o.clear=function(){this.list={},i()},o.register=function(t){r.push(t)},o.addProductToList=function(t,e){o.list.toAdd=o.list.toAdd||[],o.list.toAdd.push({product:t,amount:e}),o.list.$save()},o.addToBasket=function(t,e){o.list.alreadyAdded=o.list.alreadyAdded||[],o.list.toAdd.splice(e,1),o.list.alreadyAdded.push(t),o.list.$save()},o.removeFromBasket=function(t,e){o.list.toAdd=o.list.toAdd||[],o.list.alreadyAdded.splice(e,1),o.list.toAdd.push(t),o.list.$save()},o.clearItems=function(){o.list.toAdd=[],o.list.alreadyAdded=[],o.list.$save()},o.destroyList=function(){o.list.$remove().then(function(t){window.location.hash="#/"})},o}]),angular.module("Fireshopping").directive("router",["listService",function(t){"use strict";var e=function(e){var i=new Router;i.register("/",function(i){t.clear(),e.hasList=!1,e.$applyAsync()}),i.register("/list/:list/:index",function(i){t.setList(i),e.hasList=!0}),i.handleHashChange()};return{link:e,scope:!0}}]),angular.module("Fireshopping").directive("list",["listService",function(t){"use strict";var e=function(e){t.register(function(t){e.list=t}),e.showListDetails=!1,e.addToBasket=function(e,i){t.addToBasket(e,i)},e.removeFromBasket=function(e,i){t.removeFromBasket(e,i)},e.removeFromList=function(e,i){t.removeFromBasket(e,i)},e.clearItems=function(){t.clearItems()},e.destroyList=function(){t.destroyList()},e.toggleProducts=function(){e.showProducts=!e.showProducts}};return{link:e,scope:!0,templateUrl:"list/list.html"}}]),angular.module("Fireshopping").directive("lists",["$firebaseArray","listService",function(t,e){"use strict";var i=function(e){var i=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/listNames");e.lists=t(i),e.addList=function(){e.lists.$add({name:e.newName,toAdd:[],alreadyAdded:[]}),e.newName=""}};return{link:i,templateUrl:"lists/lists.html"}}]),angular.module("CompiledTemplates").run(["$templateCache",function(t){t.put("list/list.html",'<h1>{{list.$id}}</h1><button ng-click="toggleProducts()">Produkte zur Liste</button><h2 class="b-b">noch in den korb</h2><ul><li ng-repeat="item in list.toAdd"><div class="p-s pointer" ng-click="addToBasket(item, $index)">{{item.product.name}} {{item.amount}}</div></li></ul><h2 class="b-b">schon dabei</h2><ul><li ng-repeat="item in list.alreadyAdded"><div class="p-s pointer" ng-click="removeFromBasket(item, $index)">{{item.product.name}} {{item.amount}}</div></li></ul><div class="flex m-b-1"><a href="" class="p b grow" ng-click="clearItems()">Liste Leeren</a></div><div class="flex m-b-1"><a href="" class="p b grow" ng-click="destroyList()">Liste löschen</a></div><div class="products p" ng-if="showProducts"><div class="flex m-b-1"><a href="" class="p b grow" ng-click="toggleProducts()">Fertig</a></div><products></products></div>')}]),angular.module("Fireshopping").directive("products",["$firebaseArray","listService","domService",function(t,e,i){"use strict";var s=function(s,o){function r(){s.showAmount=!0,s.newProductName=null,i.focus("productAmount"),s.filteredProducts=s.products}var n=new Firebase("https://sizzling-torch-925.firebaseio.com/shopping/products");s.selectedProduct={},s.products=t(n),s.showAmount=!1,s.filterProducts=function(t){t?s.filteredProducts=s.products.filter(function(e){return console.log(e),e&&e.name&&e.name.indexOf(t)>-1}):s.filteredProducts=s.products},s.selectProduct=function(t){s.addProductToList(t,1)},s.addProduct=function(){s.filteredProducts.length?(s.selectedProduct=s.filteredProducts[0],r()):s.products.$add({name:s.newProductName}).then(function(t){var e=s.products.$indexFor(t.key());s.selectedProduct=s.products[e],r()})},s.addProductToList=function(t,o){e.addProductToList(t,o),s.showAmount=!1,s.selectedProduct=null,s.newProductName=null,s.filteredProducts=s.products,i.focus("productName")},s.hideProducts=function(){s.$parent.showProducts=!1},s.filterProducts()};return{link:s,templateUrl:"products/products.html"}}]),angular.module("CompiledTemplates").run(["$templateCache",function(t){t.put("lists/lists.html",'<form class="flex" name="addList" ng-submit="addList()"><input required="" class="grow" ng-model="newName" placeholder="liste hinzufügen" type="text"> <button type="submit">HINZUFÜGEN</button></form><ul><li class="flex" ng-repeat="list in lists"><a class="b-b p grow" ng-href="#/list/{{::list.name}}/{{::list.$id}}">{{::list.name}}</a> <a class="b-b p" ng-click="lists.$remove(list)" href="">löschen</a></li></ul>')}]),angular.module("CompiledTemplates").run(["$templateCache",function(t){t.put("products/products.html",'<form class="flex" ng-if="showAmount" name="addProductToListForm" ng-submit="addProductToList(selectedProduct, selectedProductAmount)"><div ng-if="selectedProductAmount">{{selectedProduct.name}} - {{selectedProductAmount}} mal zur Liste</div><input class="grow" required="" id="productAmount" type="text" ng-model="selectedProductAmount" placeholder="Anzahl hinzufügen"><button type="submit">HINZUFÜGEN</button></form><form class="flex" name="addProduct" ng-submit="addProduct()"><input required="" id="productName" class="grow" ng-model="newProductName" ng-change="filterProducts(newProductName)" placeholder="Produkt hinzufügen" type="text"> <button type="submit">HINZUFÜGEN</button></form><ul><li class="pointer p-s b-b" ng-click="selectProduct(product)" ng-repeat="product in filteredProducts | limitTo:15 track by product.$id">{{product.name}}</li></ul>')}]);